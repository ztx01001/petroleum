import{d as e,r as a,m as t,E as s,F as o,a as i,o as n,c as l,f as d,w as c,i as r,v as p}from"./vendor.a2f65e0a.js";import{f as m}from"./time.5cdf33f2.js";import{a as g}from"./api.c7737167.js";import{M as u,a as v}from"./MdArrowRoundForward.82719fc9.js";var h=e({components:{MdArrowRoundBack:u,MdArrowRoundForward:v},name:"AnomalyDetection",setup(){const e=a(1),t=a([]),s=a(null),o=a([]),i=a([]),n=a([]),l=a(null),d=a([]);return{DevicesTypeOptions:t,DevicesOptions:i,DevicesTypeOptions1:n,DevicesOptions1:a([]),deviceType1:l,deviceID1:d,datetimerange:a(null),format:"YYYY-mm-dd HH:MM:SS",startTime:a(null),endTime:a(null),currentStatus:a("process"),currentRef:e,deviceType:s,deviceID:o,image1:a(""),image2:a(""),image3:a(""),show:a(!1)}},mounted(){t.get(g.deviceType).then((e=>{console.log(e.data),100==e.data.status?(this.DevicesTypeOptions=e.data.data,this.DevicesTypeOptions1=e.data.data):window.$message.error(e.data.message)})).catch((e=>{console.log(e)}))},methods:{selectDeviceTypeGet(e){console.log(e),t.get(g.deviceType+"/"+e).then((e=>{console.log(e),100==e.data.status?this.DevicesOptions=e.data.data:window.$message.error(e.data.message)})).catch((e=>{console.log(e)}))},selectDeviceTypeGet1(e){console.log(e),t.get(g.deviceType+"/"+e).then((e=>{console.log(e),100==e.data.status?this.DevicesOptions1=e.data.data:window.$message.error(e.data.message)})).catch((e=>{console.log(e)}))},onChangeData(e){console.log(e),this.startTime=m(this.format,e[0]),this.endTime=m(this.format,e[1])},getPyodData(){console.log(this.deviceID,this.deviceID1),!this.deviceID&&this.deviceID1?window.$message.warning("必须选择一个设备"):this.startTime||this.endTime?t.get(g.exportPyod,{params:{sensorID1:this.deviceID,sensorID2:this.deviceID1,start:this.startTime,end:this.endTime}}).then((e=>{console.log(e.data.message),100===e.data.status?window.$message.success(e.data.message):window.$message.error(e.data.message)})):window.$message.warning("请选择导出时间")},getDataImage(){t.get(g.analyzeDataShow).then((e=>{console.log(e),200===e.data.status&&(this.image1=e.data.data)}))},getIsolation_forestImage(){t.get(g.isolation_forest).then((e=>{console.log(e),200===e.data.status&&(this.image2=e.data.data)}))},getModelsImage(){t.get(g.analyzeDataModels).then((e=>{console.log(e),200===e.data.status&&(this.image3=e.data.data,this.show=!1)}))},exportData(e){switch(console.log(this.currentRef),e){case 1:this.getPyodData();break;case 2:this.getDataImage();break;case 3:this.getIsolation_forestImage();break;case 4:this.show=!0,this.getModelsImage()}}}});s("data-v-55817d44");const D={class:"warning-page"},y=r("h1",{style:{"margin-top":"0","margin-bottom":"30px"}},"智慧油田设备异常检测",-1),w=r("div",{class:"model-title"},"选择需要分析的数据",-1),f={class:"device-type"},T={style:{"min-width":"500px"}},I={style:{"min-width":"200px"}},_={style:{"min-width":"200px"}},x={style:{"min-width":"200px"}},O={style:{"min-width":"200px"}},k=p(" 导出数据 "),M=p(" 查看数据分布 "),U={class:"page-main"},C=p(" 查看IsolationForest算法异常值区域 "),$={class:"page-main"},A=p(" 基于PCA、kNN、HBOS、ABOD等机器学习算法异常探测模型异常值 "),b={class:"page-main"};o(),h.render=function(e,a,t,s,o,p){const m=i("n-date-picker"),g=i("n-select"),u=i("n-button"),v=i("n-grid-item"),h=i("n-grid"),R=i("n-image"),S=i("n-spin");return n(),l("div",D,[y,w,d(h,{"x-gap":24,cols:24},{default:c((()=>[d(v,null,{default:c((()=>[r("div",f,[r("div",T,[d(m,{value:e.datetimerange,"onUpdate:value":[a[0]||(a[0]=a=>e.datetimerange=a),e.onChangeData],type:"datetimerange"},null,8,["value","onUpdate:value"])]),r("div",I,[d(g,{class:"model-input",value:e.deviceType,"onUpdate:value":[a[1]||(a[1]=a=>e.deviceType=a),e.selectDeviceTypeGet],placeholder:"请选择设备类型",options:e.DevicesTypeOptions},null,8,["value","options","onUpdate:value"])]),r("div",_,[d(g,{class:"model-input",value:e.deviceID,"onUpdate:value":a[2]||(a[2]=a=>e.deviceID=a),placeholder:"请选择设备",options:e.DevicesOptions},null,8,["value","options"])]),r("div",x,[d(g,{class:"model-input",value:e.deviceType1,"onUpdate:value":[a[3]||(a[3]=a=>e.deviceType1=a),e.selectDeviceTypeGet1],placeholder:"请选择设备类型",options:e.DevicesTypeOptions1},null,8,["value","options","onUpdate:value"])]),r("div",O,[d(g,{class:"model-input",value:e.deviceID1,"onUpdate:value":a[4]||(a[4]=a=>e.deviceID1=a),placeholder:"请选择设备",options:e.DevicesOptions1},null,8,["value","options"])]),d(u,{type:"info",onClick:a[5]||(a[5]=a=>e.exportData(1))},{default:c((()=>[k])),_:1})])])),_:1})])),_:1}),d(h,{"x-gap":24,cols:24,style:{"margin-top":"3rem"}},{default:c((()=>[d(v,null,{default:c((()=>[d(u,{quaternary:"",type:"primary",onClick:a[6]||(a[6]=a=>e.exportData(2))},{default:c((()=>[M])),_:1}),r("div",U,[d(R,{src:e.image1},null,8,["src"])])])),_:1})])),_:1}),d(h,{"x-gap":24,cols:24},{default:c((()=>[d(v,null,{default:c((()=>[d(u,{quaternary:"",type:"primary",onClick:a[7]||(a[7]=a=>e.exportData(3))},{default:c((()=>[C])),_:1}),r("div",$,[d(R,{src:e.image2},null,8,["src"])])])),_:1})])),_:1}),d(h,{"x-gap":24,cols:24},{default:c((()=>[d(v,null,{default:c((()=>[d(S,{show:e.show},{default:c((()=>[d(u,{quaternary:"",type:"primary",onClick:a[8]||(a[8]=a=>e.exportData(4))},{default:c((()=>[A])),_:1}),r("div",b,[d(R,{src:e.image3},null,8,["src"])])])),_:1},8,["show"])])),_:1})])),_:1})])},h.__scopeId="data-v-55817d44";export{h as default};
