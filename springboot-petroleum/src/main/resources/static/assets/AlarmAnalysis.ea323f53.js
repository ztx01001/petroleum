import{d as a,r as t,co as e,a3 as s,n as o,m as l,E as i,F as d,a as r,o as n,c,i as u,L as y,f,w as p,y as m,A as h,v as g}from"./vendor.a2f65e0a.js";import{u as v}from"./userEchar.9f48f366.js";import{a as b}from"./api.c7737167.js";import"./install.50cc89d0.js";const x={High:["#ffbf7f","#ffd6ad"],Low:["#ff7f7f","#ffa8a8"],Medium:["#7fff7f","#d6ffad"],Critical:["#7f7fff","#b7b7ff"]};const S=a({name:"AlarmAnalysis",setup(){const a=t([]),i=t(),d=t(),r=t(),n=t(),c=t(),u=t(),y=t(),f=t(),p=t(),m=t(),h={title:{text:"告警级别七天数量趋势图分析"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{},toolbox:{feature:{}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[]},g={title:{text:"告警级别每小时数量趋势图分析"},legend:{},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},xAxis:{type:"category",data:[],axisPointer:{type:"shadow"}},yAxis:{type:"value"},series:[],grid:{bottom:"30"}},S={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"right"},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},data:[],label:{formatter:"{b}: {@2012} ({d}%)"},emphasis:{}}]},w={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"right"},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},data:[],label:{formatter:"{b}: {@2012} ({d}%)"},emphasis:{}}]},C={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"right"},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},data:[],label:{formatter:"{b}: {@2012} ({d}%)"},emphasis:{}}]},k={xAxis:{type:"category",data:[]},yAxis:{},series:[{data:[],type:"bar",barWidth:20,itemStyle:{borderRadius:5,color:new e(0,0,0,1,[{offset:0,color:"#14c8d4"},{offset:1,color:"#43eec6"}])},label:{show:!0,position:"top"}}],grid:{top:"20px",left:"50px",right:"20px",bottom:"20px"}},A={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"right"},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},data:[],label:{formatter:"{b}: {@2012} ({d}%)"},emphasis:{}}]},T={title:{text:"七天传感器告警数量分析"},xAxis:{type:"category",data:[]},yAxis:{},series:[{data:[],type:"bar",itemStyle:{normal:{borderRadius:5,color:function(a){var t=a.value;return t===Math.max.apply(null,T.series[0].data)?new e(0,0,0,1,[{offset:0,color:"#ff8e8e"},{offset:.5,color:"#ff8484"},{offset:1,color:"#ffa8a8"}]):t===Math.min.apply(null,T.series[0].data)?new e(0,1,0,0,[{offset:0,color:"rgba(255,191, 127, 0.5)"},{offset:1,color:"#ffbf7f"}]):new e(0,0,0,1,[{offset:0,color:"#dbb7ff"},{offset:.5,color:"#bf7fff"},{offset:1,color:"#bf7fff"}])}}},label:{show:!0,position:"top"}}],grid:{top:"50px",left:"50px",right:"20px",bottom:"20px"}},D={title:{text:"七天告警设备类型分析"},xAxis:{type:"category",data:[]},yAxis:{},series:[{data:[],type:"bar",itemStyle:{normal:{borderRadius:5,color:function(a){var t=a.value;return t===Math.max.apply(null,D.series[0].data)?new e(0,1,0,0,[{offset:0,color:"rgba(255, 191, 44, 0.2)"},{offset:1,color:"#FFBF2C"}]):t===Math.min.apply(null,D.series[0].data)?new e(0,1,0,0,[{offset:0,color:"rgba(127, 255, 127, 0.2)"},{offset:1,color:"#7fff7f"}]):new e(0,1,0,0,[{offset:0,color:"rgba(24, 144, 255, 0.2)"},{offset:1,color:"#35C3FF"}])}}},label:{show:!0,position:"top"}}],grid:{top:"50px",left:"50px",right:"20px",bottom:"20px"}},W={xAxis:{type:"category",data:[]},yAxis:{},series:[{data:[],type:"bar",barWidth:20,itemStyle:{borderRadius:5,color:new e(0,0,0,1,[{offset:0,color:"#14c8d4"},{offset:1,color:"#43eec6"}])},label:{show:!0,position:"top"}}],grid:{top:"20px",left:"50px",right:"20px",bottom:"20px"}},_=t(0),E=t(0),L=()=>{l.get(b.weekSeverity).then((a=>{if(console.log("getTodaySeverity",a),100==a.data.status){let t=[];t=a.data.data,t.forEach((a=>{C.series[0].data.push({name:a.severity,value:a.count})}))}})).catch((a=>{console.log(a)}))},M=()=>{l.get(b.weekStatus).then((a=>{if(console.log("todayStatus",a),100==a.data.status){let t=[];t=a.data.data,t.forEach((a=>{A.series[0].data.push({name:a.displayName,value:a.count})}))}})).catch((a=>{console.log(a)}))},P=()=>{l.get(b.todayTop).then((t=>{console.log("getTodayTop",t),100==t.data.status&&(a.value=t.data.data)}))};return s((()=>{console.log("执行过mounted操作"),o((()=>{l.get(b.topHourCount).then((a=>{console.log(a),100==a.data.status?E.value=a.data.data:E.value="获取失败"})),l.get(b.analysisTodayCount).then((a=>{console.log(a),100==a.data.status?_.value=a.data.data:_.value="获取失败"})),l.get(b.analysisWeekCount).then((a=>{console.log(a),100==a.data.status&&(k.xAxis.data=a.data.data.date,k.series[0].data=a.data.data.count,u.value=v(k,"analysis06"))})),l.get(b.topHoursCount).then((a=>{console.log(a),100==a.data.status&&(W.xAxis.data=a.data.data.date,W.series[0].data=a.data.data.count,m.value=v(W,"analysis10"))})),l.get(b.hourSeverityDaily).then((a=>{if(console.log("getHourSeverityDaily",a),100==a.data.status){g.xAxis.data=a.data.data.date;let t=Object.keys(a.data.data.countMap),s=a.data.data.countMap;console.log(t),t.forEach((a=>{g.series.push({name:a,type:"bar",label:{show:!0,position:"top"},itemStyle:{borderRadius:5,color:new e(0,0,0,1,[{offset:0,color:x[a][0]},{offset:1,color:x[a][1]}])},data:s[a]})})),console.log(g),d.value=v(g,"analysis02")}})),l.get(b.todaySeverity).then((a=>{if(console.log("getTodaySeverity",a),100==a.data.status){let t=[];t=a.data.data,t.forEach((a=>{S.series[0].data.push({name:a.severity,value:a.count})})),console.log(S),r.value=v(S,"analysis03")}})).catch((a=>{console.log(a)})),l.get(b.todayStatus).then((a=>{if(console.log("todayStatus",a),100==a.data.status){let t=[];t=a.data.data,t.forEach((a=>{w.series[0].data.push({name:a.displayName,value:a.count})})),console.log(w),n.value=v(w,"analysis04")}})).catch((a=>{console.log(a)})),L(),M(),l.get(b.weekSensor).then((a=>{if(console.log("getWeekSensor",a),100==a.data.status){let t=[];t=a.data.data,t.forEach((a=>{T.series[0].data.push(a.count),T.xAxis.data.push(a.sensorName)})),f.value=v(T,"analysis08")}})).catch((a=>{console.log(a)})),l.get(b.weekDeviceType).then((a=>{if(console.log("weekDeviceType",a),100==a.data.status){let t=[];t=a.data.data,t.forEach((a=>{D.series[0].data.push(a.count),D.xAxis.data.push(a.deviceType)})),p.value=v(D,"analysis09")}})).catch((a=>{console.log(a)})),l.get(b.weekSeverityDaily).then((a=>{if(console.log("weekSeverityDaily",a),100==a.data.status){h.xAxis[0].data=a.data.data.date;let t=Object.keys(a.data.data.countMap),e=a.data.data.countMap;t.forEach((a=>{h.series.push({name:a,type:"line",smooth:!0,label:{show:!0,position:"top"},emphasis:{focus:"series"},data:e[a]})})),i.value=v(h,"analysis01")}})),P()}))})),{myChart01:i,myChart02:d,myChart03:r,myChart04:n,myChart05:c,myChart06:u,myChart07:y,myChart08:f,myChart09:p,todayCount:_,hourCount:E,option05:C,option07:A,myChart10:m,levelStatus:t(!0),alarmStatus:t(!0),getWeekStatus:M,getWeekSeverity:L,getTodayTop:P,getWeekTop:()=>{l.get(b.weekTop).then((t=>{console.log("weekTop",t),100==t.data.status&&(a.value=t.data.data)})),a.value=[]},columns:[{title:"序号",key:"orderID"},{title:"告警ID",key:"alarmID"},{title:"告警内容",key:"alarmName"},{title:"告警数量",key:"count"}],tableData:a,rowClassName:a=>1==a.orderID?"table01":2==a.orderID?"table02":3==a.orderID?"table03":""}},methods:{selectLevelPanel(a){console.log(a),"today"==a?this.levelStatus=!0:"week"==a&&(this.levelStatus=!1,this.myChart05=v(this.option05,"analysis05"))},selectStatusPanel(a){"today"==a?this.alarmStatus=!0:"week"==a&&(this.alarmStatus=!1,this.myChart07=v(this.option07,"analysis07"))},selectTableData(a){"today"==a?this.getTodayTop():"week"==a&&this.getWeekTop()}}});i("data-v-6bb7a754");const w={class:"alarm-logs-main"},C=u("h1",{style:{"margin-top":"0","margin-bottom":"30px"}},"智慧油田设备告警智能分析",-1),k={class:"analysis-box01"},A={class:"analysis-box01-flex"},T={class:"analysis-box-child item"},D=u("div",{style:{"margin-top":"0"}}," 小时告警量 ",-1),W={class:"alarm-counts"},_=u("div",{class:"analysis-box01-child item"},[u("div",null,"当天每小时告警量"),u("div",{id:"analysis10",class:"analysis-panel06"})],-1),E={class:"analysis-box01-flex"},L={class:"analysis-box-child item"},M=u("div",{style:{"margin-top":"0"}}," 今日告警量 ",-1),P={class:"alarm-counts"},R=u("div",{class:"analysis-box01-child item"},[u("div",null,"七天告警量"),u("div",{id:"analysis06",class:"analysis-panel06"})],-1),O=u("div",{class:"analysis-box02"},[u("div",{id:"analysis02",class:"alarm-panel01 item"}),u("div",{id:"analysis01",class:"alarm-panel01 item"})],-1),I={class:"analysis-box03"},j={class:"analysis-box03-level item"},F=g(" 今日告警级别分析 "),N=g(" 七日告警级别分析 "),U={id:"analysis03",class:"analysis-box03-child"},H={id:"analysis05",class:"analysis-box03-child"},z={class:"analysis-box03-level item"},B=g(" 今日告警状态分析 "),G=g(" 七日告警状态分析 "),q={id:"analysis04",class:"analysis-box03-child"},J={id:"analysis07",class:"analysis-box03-child"},K=u("div",{class:"analysis-box02"},[u("div",{id:"analysis08",class:"alarm-panel01 item"}),u("div",{id:"analysis09",class:"alarm-panel01 item"})],-1),Q={class:"item"},V={style:{padding:"10px 10px 0 10px"}},X=g(" 今日告警TOP分析 "),Y=g(" 七日告警TOP分析 ");d(),S.render=function(a,t,e,s,o,l){const i=r("n-tab"),d=r("n-tabs"),g=r("n-data-table");return n(),c("div",w,[C,u("div",k,[u("div",A,[u("div",T,[D,u("div",W,y(a.hourCount),1)]),_]),u("div",E,[u("div",L,[M,u("div",P,y(a.todayCount),1)]),R])]),O,u("div",I,[u("div",j,[u("div",null,[f(d,{type:"line","onUpdate:value":a.selectLevelPanel},{default:p((()=>[f(i,{name:"today"},{default:p((()=>[F])),_:1}),f(i,{name:"week"},{default:p((()=>[N])),_:1})])),_:1},8,["onUpdate:value"])]),m(u("div",U,null,512),[[h,a.levelStatus]]),m(u("div",H,null,512),[[h,!a.levelStatus]])]),u("div",z,[u("div",null,[f(d,{type:"line","onUpdate:value":a.selectStatusPanel},{default:p((()=>[f(i,{name:"today"},{default:p((()=>[B])),_:1}),f(i,{name:"week"},{default:p((()=>[G])),_:1})])),_:1},8,["onUpdate:value"])]),m(u("div",q,null,512),[[h,a.alarmStatus]]),m(u("div",J,null,512),[[h,!a.alarmStatus]])])]),K,u("div",Q,[u("div",V,[f(d,{type:"line","onUpdate:value":a.selectTableData},{default:p((()=>[f(i,{name:"today"},{default:p((()=>[X])),_:1}),f(i,{name:"week"},{default:p((()=>[Y])),_:1})])),_:1},8,["onUpdate:value"])]),f(g,{size:"large",columns:a.columns,data:a.tableData,"row-class-name":a.rowClassName},null,8,["columns","data","row-class-name"])])])},S.__scopeId="data-v-6bb7a754";export{S as default};
